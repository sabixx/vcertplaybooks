config:
  connection:
    platform: vAaS #cloudplatform
    credentials:
      apiKey: '{{ Env "TLSPC_APIKEY" }}'
certificateTasks:
  - name: RDP # Task Identifier, no relevance in tool run
    renewBefore: 30d # 20%
    setEnvVars: ["thumbprint"]
    request:
      csr: local
      validDays: 31d
      subject:
        commonName: '{{ Env "TLSPC_Hostname" }}.tlsp.demo'
        country: GB
        locality: London
        state: London
        organization: Venafi
        orgUnits:
          - vcert
      sanDNS: 
        - '{{ Env "TLSPC_Hostname"}}.tlsp.demo'
        - '{{ Hostname | ToLower -}}.tlsp.demo'
      zone: "jenkins\\ztAllowAll"
    installations:
      - format: PKCS12
        file: '/var/lib/jenkins/certs/jenkins.p12'
        p12Password: "changeit"
        afterInstallAction: 'sudo systemctl restart jenkins'