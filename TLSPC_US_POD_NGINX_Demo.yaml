config:
  connection:
    platform: tlspc #platform
    credentials:
      externalJWT: '{{ Env "ExternalJWT" }}'
      tokenURL: '{{ Env "TokenURL" }}' # https://api.venafi.cloud/v1/oauth2/v2.0/0ce51ed1-da6f-11ec-a787-89187550eb51/token'
certificateTasks:
  - name: IIS # Task Identifier, can be used with 
    renewBefore: 20%
    setEnvVars: ["thumbprint"]
    request:
      csr: local
      subject:
        commonName: 'mynginx30744.tlsp.demo'
        country: GB
        locality: London
        state: London
        organization: Venafi
        orgUnits:
          - vcert
      sanDNS: 
        - 'mynginx30744.tlsp.demo'
      zone: 'vcert\ztAllowAll'
    installations:
      - format: PEM
        file: "/etc/nginx/ssl/nginx_30744.crt"
        chainFile: "/etc/nginx/ssl/nginx_30744.crt"
        keyFile: "/etc/nginx/ssl/nginx_30744.key"
        afterInstallAction: "echo Success!!!"


        